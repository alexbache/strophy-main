{
  "version": 3,
  "sources": ["../../src/components/image-marquee.ts"],
  "sourcesContent": ["import gsap from 'gsap';\n\nimport { handleResize } from '$utils/handle-resize';\n\nconst imageMarquee = () => {\n  try {\n    const marqueeRows = document.querySelectorAll('[image-marquee=\"row\"]');\n\n    if (!marqueeRows || marqueeRows.length === 0) {\n      console.error('No marquee rows found.');\n      throw new Error('Marquee rows not found');\n    }\n\n    // Function to update animation for a row\n    const updateRowAnimation = (row: Element, image: HTMLImageElement, imageOffset: boolean) => {\n      // Only start animation if image has actual dimensions\n      if (!image.complete || image.naturalWidth === 0) {\n        // Wait for image to load before starting animation\n        image.addEventListener('load', () => updateRowAnimation(row, image, imageOffset));\n        return;\n      }\n\n      const imageWidth = image.clientWidth;\n      if (imageWidth === 0) {\n        console.warn('Image width is 0, delaying animation');\n        // Retry after a short delay if width is 0\n        setTimeout(() => updateRowAnimation(row, image, imageOffset), 100);\n        return;\n      }\n\n      // Calculate the initial offset\n      const initialX = imageOffset ? -imageWidth * 0.65 : 0;\n\n      gsap.killTweensOf(row);\n      gsap.to(row, {\n        x: -imageWidth + initialX,\n        duration: 120,\n        ease: 'none',\n        repeat: -1,\n        modifiers: {\n          x: gsap.utils.unitize((x) => parseFloat(x) % imageWidth),\n        },\n      });\n\n      // Set the initial position after starting the animation\n      if (imageOffset) {\n        gsap.set(row, { x: initialX });\n      }\n    };\n\n    marqueeRows.forEach((row) => {\n      let imageOffset: boolean = false;\n\n      const imageOffsetAttr = row.getAttribute('image-offset');\n\n      if (imageOffsetAttr) {\n        imageOffset = true;\n      }\n\n      console.log('imageOffset', imageOffset);\n\n      const image = row.querySelector('img');\n      if (!image) {\n        console.error('No image found in marquee row');\n        return;\n      }\n\n      const clone = image.cloneNode(true) as HTMLImageElement;\n      row.appendChild(clone);\n\n      // Initialize animation and handle resize\n      updateRowAnimation(row, image, imageOffset);\n\n      handleResize(() => updateRowAnimation(row, image, imageOffset), 100, {\n        widthOnly: true,\n        threshold: 10,\n      });\n    });\n  } catch (error) {\n    console.error('Error in imageMarquee:', error);\n  }\n};\n\nconst initPrizesBgMarquee = () => {\n  imageMarquee();\n};\n\nexport { initPrizesBgMarquee };\n"],
  "mappings": ";;;;;;;;;AAIA,IAAM,eAAe,MAAM;AACzB,MAAI;AACF,UAAM,cAAc,SAAS,iBAAiB,uBAAuB;AAErE,QAAI,CAAC,eAAe,YAAY,WAAW,GAAG;AAC5C,cAAQ,MAAM,wBAAwB;AACtC,YAAM,IAAI,MAAM,wBAAwB;AAAA,IAC1C;AAGA,UAAM,qBAAqB,CAAC,KAAc,OAAyB,gBAAyB;AAE1F,UAAI,CAAC,MAAM,YAAY,MAAM,iBAAiB,GAAG;AAE/C,cAAM,iBAAiB,QAAQ,MAAM,mBAAmB,KAAK,OAAO,WAAW,CAAC;AAChF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM;AACzB,UAAI,eAAe,GAAG;AACpB,gBAAQ,KAAK,sCAAsC;AAEnD,mBAAW,MAAM,mBAAmB,KAAK,OAAO,WAAW,GAAG,GAAG;AACjE;AAAA,MACF;AAGA,YAAM,WAAW,cAAc,CAAC,aAAa,OAAO;AAEpD,kBAAK,aAAa,GAAG;AACrB,kBAAK,GAAG,KAAK;AAAA,QACX,GAAG,CAAC,aAAa;AAAA,QACjB,UAAU;AAAA,QACV,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,WAAW;AAAA,UACT,GAAG,YAAK,MAAM,QAAQ,CAAC,MAAM,WAAW,CAAC,IAAI,UAAU;AAAA,QACzD;AAAA,MACF,CAAC;AAGD,UAAI,aAAa;AACf,oBAAK,IAAI,KAAK,EAAE,GAAG,SAAS,CAAC;AAAA,MAC/B;AAAA,IACF;AAEA,gBAAY,QAAQ,CAAC,QAAQ;AAC3B,UAAI,cAAuB;AAE3B,YAAM,kBAAkB,IAAI,aAAa,cAAc;AAEvD,UAAI,iBAAiB;AACnB,sBAAc;AAAA,MAChB;AAEA,cAAQ,IAAI,eAAe,WAAW;AAEtC,YAAM,QAAQ,IAAI,cAAc,KAAK;AACrC,UAAI,CAAC,OAAO;AACV,gBAAQ,MAAM,+BAA+B;AAC7C;AAAA,MACF;AAEA,YAAM,QAAQ,MAAM,UAAU,IAAI;AAClC,UAAI,YAAY,KAAK;AAGrB,yBAAmB,KAAK,OAAO,WAAW;AAE1C,mBAAa,MAAM,mBAAmB,KAAK,OAAO,WAAW,GAAG,KAAK;AAAA,QACnE,WAAW;AAAA,QACX,WAAW;AAAA,MACb,CAAC;AAAA,IACH,CAAC;AAAA,EACH,SAAS,OAAO;AACd,YAAQ,MAAM,0BAA0B,KAAK;AAAA,EAC/C;AACF;AAEA,IAAM,sBAAsB,MAAM;AAChC,eAAa;AACf;",
  "names": []
}
