{
  "version": 3,
  "sources": ["../../src/components/phase-control.ts"],
  "sourcesContent": ["import gsap from 'gsap';\n\nimport { isTablet } from '../utils/page-utils';\n\n/**\n * Constants for DOM element selectors\n */\nconst SHARED_PHASE_ATTRIBUTES = {\n  phaseID: 'data-phase-slug',\n  endDate: 'data-phase-date',\n} as const;\n\nconst PHASE_LOCATIONS = {\n  nav: {\n    phaseList: '[data-phase-element=\"nav-list\"]',\n    timer: '[data-phase-element=\"nav-timer\"]',\n    countdownMessage: '[data-phase-element=\"nav-countdown-message\"]',\n    messageWrapper: '[data-phase-element=\"nav-message-wrapper\"]',\n    ctaButton: '[data-phase-element=\"nav-cta-button\"]',\n  },\n  banner: {\n    phaseList: '[data-phase-element=\"banner-list\"]',\n    timer: '[data-phase-element=\"banner-timer\"]',\n    countdownMessage: '[data-phase-element=\"banner-countdown-message\"]',\n    messageWrapper: '[data-phase-element=\"banner-message-wrapper\"]',\n  },\n} as const;\n\nconst PHASE_DATA_CONTROL = {\n  controlItem: '[data-phase-element=\"control\"]',\n  showAll: '[data-phase-control=\"show-all\"]',\n  activePhase: 'data-phase-active',\n} as const;\n\nconst MARQUEE_SELECTORS = {\n  row: '[banner-marquee-element=\"row\"]',\n  item: '[banner-marquee-element=\"item\"]',\n  initializedAttr: 'data-marquee-initialized',\n} as const;\n\n/**\n * TypeScript interfaces for type safety\n */\ninterface TimeRemaining {\n  days: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n}\n\ninterface PhaseItem extends Element {\n  _countdownInterval?: number;\n}\n\ninterface PhaseData {\n  phaseList: Element;\n  activePhase: string | null;\n}\n\ninterface PhaseConfig {\n  location: keyof typeof PHASE_LOCATIONS;\n  showAllPhases: boolean;\n  activePhase: string | null;\n}\n\ninterface MarqueeRow extends Element {\n  _timerInterval?: ReturnType<typeof setInterval>;\n}\n\n// Add missing variables\nlet isResizing = false;\nlet resizeTimeout: ReturnType<typeof setTimeout>;\n\n/**\n * Time calculation and formatting functions\n * @param targetDate - The date to calculate the time remaining to\n * @returns The time remaining to the target date\n */\nconst calculateTimeRemaining = (targetDate: Date): TimeRemaining | null => {\n  const now = new Date();\n  const timeDiff = targetDate.getTime() - now.getTime();\n\n  if (timeDiff <= 0) return null;\n\n  return {\n    days: Math.floor(timeDiff / (1000 * 60 * 60 * 24)),\n    hours: Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),\n    minutes: Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60)),\n    seconds: Math.floor((timeDiff % (1000 * 60)) / 1000),\n  };\n};\n\nconst formatTimeDisplay = (time: TimeRemaining): string => {\n  const { days, hours } = time;\n  return `${days}d ${hours}h.`;\n};\n\n/**\n * DOM utility functions\n */\nconst setElementDisplay = (element: Element, display: 'none' | 'flex' | 'block'): void => {\n  (element as HTMLElement).style.display = display;\n};\n\nconst getValidDate = (dateString: string | null): Date | null => {\n  if (!dateString) return null;\n\n  const date = new Date(dateString);\n  return isNaN(date.getTime()) ? null : date;\n};\n\nconst showPhaseList = (): void => {\n  const phaseList = document.querySelector(PHASE_LOCATIONS.nav.phaseList) as HTMLElement;\n  if (!phaseList) return;\n\n  setElementDisplay(phaseList, 'block');\n};\n\n/**\n * Nav animation functions\n */\nconst animateNavMessageIn = (phaseItem: PhaseItem): void => {\n  const messageWrapper = phaseItem.querySelector(PHASE_LOCATIONS.nav.messageWrapper);\n  const ctaButton = phaseItem.querySelector(PHASE_LOCATIONS.nav.ctaButton);\n\n  showPhaseList();\n\n  gsap.fromTo(\n    ctaButton,\n    { opacity: 0, x: 0 },\n    { opacity: 1, x: 0, duration: 0.3, ease: 'power2.out', display: 'block', delay: 0.3 }\n  );\n  gsap.fromTo(\n    messageWrapper,\n    { opacity: 0, x: 20, y: 0 },\n    { opacity: 1, x: 0, y: 0, duration: 0.5, ease: 'power2.out', delay: 0.4 }\n  );\n};\n\n/**\n * Banner/Marquee functions\n */\nconst setupMarqueeItem = (item: HTMLElement): number => {\n  // Configure item styling for marquee\n  item.style.flexShrink = '0';\n  item.style.whiteSpace = 'nowrap';\n\n  // Calculate width after styling\n  const itemWidth = item.getBoundingClientRect().width + 2;\n  if (itemWidth > 0) {\n    item.style.width = `${itemWidth}px`;\n  }\n\n  return itemWidth;\n};\n\nconst cloneMarqueeItems = (row: Element, originalItem: HTMLElement, itemWidth: number): void => {\n  // Calculate how many items we need to fill the screen with some buffer\n  const screenWidth = window.innerWidth;\n  const maxItems = 20; // Prevent excessive DOM nodes\n  const itemsNeeded = Math.min(Math.ceil((screenWidth * 2) / itemWidth) + 2, maxItems);\n\n  // Clone items\n  for (let i = 0; i < itemsNeeded - 1; i++) {\n    const clone = originalItem.cloneNode(true) as HTMLElement;\n    clone.style.width = `${itemWidth}px`;\n    row.appendChild(clone);\n  }\n};\n\nconst startMarqueeAnimation = (row: Element, itemWidth: number): void => {\n  // Kill any existing animations first\n  gsap.killTweensOf(row);\n  gsap.killTweensOf(row.children);\n\n  // First make sure all children are visible\n  // Fade in and start moving at the same time\n  gsap.set(row.children, { opacity: 0 });\n  gsap.set(row, { opacity: 0, x: 0 });\n\n  // Animate both the row and children simultaneously\n  gsap.to(row.children, {\n    opacity: 1,\n    duration: 0.3,\n\n    ease: 'power2.out',\n  });\n\n  gsap.fromTo(\n    row,\n    { opacity: 0, x: 0, y: -20 },\n    { opacity: 1, x: -itemWidth, y: 0, duration: 0.3, ease: 'power2.out' }\n  );\n\n  // Start the infinite marquee animation immediately\n  gsap.to(row, {\n    x: -itemWidth,\n    duration: 45, // Faster speed\n    ease: 'none',\n    repeat: -1,\n    repeatDelay: 0,\n    immediateRender: true,\n    delay: 0.1,\n  });\n};\n\nconst updateAllTimersInMarquee = (row: Element): void => {\n  const items = row.querySelectorAll(MARQUEE_SELECTORS.item);\n\n  items.forEach((item) => {\n    const dateAttr = item.getAttribute(SHARED_PHASE_ATTRIBUTES.endDate);\n    const targetDate = getValidDate(dateAttr);\n    if (!targetDate) return;\n\n    const timer = item.querySelector(PHASE_LOCATIONS.banner.timer);\n    if (!timer) return;\n\n    const timeRemaining = calculateTimeRemaining(targetDate);\n    if (timeRemaining) {\n      timer.textContent = formatTimeDisplay(timeRemaining);\n    } else {\n      timer.textContent = 'Completed';\n    }\n  });\n};\n\nconst initMarqueeTimers = (row: MarqueeRow): void => {\n  // Set up interval to update all timers in the marquee\n  const updateInterval = setInterval(() => {\n    updateAllTimersInMarquee(row);\n  }, 1000);\n\n  // Store interval for cleanup\n  row._timerInterval = updateInterval;\n};\n\nconst cleanupMarqueeTimers = (row: MarqueeRow): void => {\n  if (row._timerInterval) {\n    clearInterval(row._timerInterval);\n    delete row._timerInterval;\n  }\n};\n\n/**\n * Main marquee initialization\n */\nconst initMarqueeBanner = (): void => {\n  // Only initialize on tablet\n  if (!isTablet()) {\n    const rows = document.querySelectorAll(MARQUEE_SELECTORS.row);\n    rows.forEach((row) => {\n      gsap.set(row, { opacity: 0 });\n      gsap.set(row.children, { opacity: 0 });\n      cleanupMarqueeTimers(row as MarqueeRow);\n    });\n    return;\n  }\n\n  const rows = document.querySelectorAll(MARQUEE_SELECTORS.row);\n  if (!rows.length) return;\n\n  rows.forEach((row) => {\n    // Skip already initialized rows\n    if (row.hasAttribute(MARQUEE_SELECTORS.initializedAttr)) return;\n\n    // Clean up any existing timers\n    cleanupMarqueeTimers(row as MarqueeRow);\n\n    // Hide everything initially for smooth animation later\n    gsap.set(row, { opacity: 0 });\n    gsap.set(row.children, { opacity: 0 });\n\n    const originalItem = row.querySelector(MARQUEE_SELECTORS.item) as HTMLElement;\n    if (!originalItem) return;\n\n    // Set up the marquee item and get its width\n    const itemWidth = setupMarqueeItem(originalItem);\n    if (itemWidth === 0) return;\n\n    // Clone items to fill the screen\n    cloneMarqueeItems(row, originalItem, itemWidth);\n\n    // Set initial timer values\n    updateAllTimersInMarquee(row);\n\n    // Start timer updates\n    initMarqueeTimers(row as MarqueeRow);\n\n    // Mark as initialized\n    row.setAttribute(MARQUEE_SELECTORS.initializedAttr, 'true');\n\n    // Start the animation\n    startMarqueeAnimation(row, itemWidth);\n  });\n};\n\nlet lastWidth = window.innerWidth;\nlet lastHeight = window.innerHeight;\n\nconst handleMarqueeResize = (): void => {\n  // Check if dimensions actually changed meaningfully\n  const currentWidth = window.innerWidth;\n  const currentHeight = window.innerHeight;\n\n  // Height threshold helps ignore URL bar show/hide on mobile\n  if (currentWidth === lastWidth && Math.abs(currentHeight - lastHeight) < 300) {\n    return;\n  }\n\n  // Update stored dimensions\n  lastWidth = currentWidth;\n  lastHeight = currentHeight;\n\n  const rows = document.querySelectorAll(MARQUEE_SELECTORS.row);\n  if (!rows.length) return;\n\n  // Immediately hide all rows\n  rows.forEach((row) => {\n    gsap.set(row, { opacity: 0 });\n    gsap.set(row.children, { opacity: 0 });\n  });\n\n  // If not tablet, just clean up and return\n  if (!isTablet()) {\n    rows.forEach((row) => {\n      cleanupMarqueeTimers(row as MarqueeRow);\n    });\n    return;\n  }\n\n  // Only proceed with cleanup and reinitialization if not already resizing\n  if (isResizing) return;\n  isResizing = true;\n\n  // Kill all existing animations first\n  rows.forEach((row) => {\n    gsap.killTweensOf(row);\n    gsap.killTweensOf(row.children);\n  });\n\n  // Fade out first\n  rows.forEach((row) => {\n    gsap.to(row, {\n      opacity: 0,\n      duration: 0.2,\n      onComplete: () => {\n        // Clean up existing timers\n        cleanupMarqueeTimers(row as MarqueeRow);\n\n        // Reset styles\n        (row as HTMLElement).style.cssText = '';\n\n        // Preserve original item\n        const originalItem = row.querySelector(MARQUEE_SELECTORS.item);\n        if (!originalItem) {\n          isResizing = false;\n          return;\n        }\n\n        // Clone and reset the original content\n        const originalContent = originalItem.cloneNode(true) as HTMLElement;\n        originalContent.style.cssText = '';\n\n        // Reset the row\n        row.innerHTML = '';\n        row.appendChild(originalContent);\n        row.removeAttribute(MARQUEE_SELECTORS.initializedAttr);\n\n        // Reinitialize this specific row\n        const itemWidth = setupMarqueeItem(originalContent);\n        if (itemWidth === 0) {\n          isResizing = false;\n          return;\n        }\n\n        cloneMarqueeItems(row, originalContent, itemWidth);\n        updateAllTimersInMarquee(row);\n        initMarqueeTimers(row as MarqueeRow);\n        row.setAttribute(MARQUEE_SELECTORS.initializedAttr, 'true');\n        startMarqueeAnimation(row, itemWidth);\n      },\n    });\n  });\n\n  // Reset resize flag after all animations complete\n  setTimeout(() => {\n    isResizing = false;\n  }, 300);\n};\n\nconst createDebouncedResize = (): (() => void) => {\n  return () => {\n    clearTimeout(resizeTimeout);\n    resizeTimeout = setTimeout(handleMarqueeResize, 150);\n  };\n};\n\n/**\n * Nav countdown functions\n */\nconst initNavCountdown = (item: PhaseItem, selectors: (typeof PHASE_LOCATIONS)['nav']): void => {\n  const endDateAttr = item.getAttribute(SHARED_PHASE_ATTRIBUTES.endDate);\n  const targetDate = getValidDate(endDateAttr);\n  const countdownMessage = item.querySelector(selectors.countdownMessage) as HTMLElement;\n\n  if (!targetDate) {\n    animateNavMessageIn(item);\n    return;\n  }\n\n  const timer = item.querySelector(selectors.timer);\n\n  if (!timer) return;\n\n  // Check if countdown is already complete\n  const timeRemaining = calculateTimeRemaining(targetDate);\n\n  if (!timeRemaining) {\n    // Countdown already complete\n    timer.textContent = 'Completed';\n    countdownMessage.style.display = 'none';\n    animateNavMessageIn(item);\n    return;\n  }\n\n  // Set initial timer value\n  timer.textContent = formatTimeDisplay(timeRemaining);\n\n  // Start countdown interval\n  const countdownInterval = setInterval(() => {\n    const currentTimeRemaining = calculateTimeRemaining(targetDate);\n\n    if (!currentTimeRemaining) {\n      // Countdown just completed\n      clearInterval(countdownInterval);\n      return;\n    }\n\n    // Update timer display\n    timer.textContent = formatTimeDisplay(currentTimeRemaining);\n  }, 1000);\n\n  // Store interval ID for cleanup\n  item._countdownInterval = countdownInterval;\n\n  animateNavMessageIn(item);\n};\n\n/**\n * Banner countdown functions\n */\nconst initBannerCountdown = (\n  item: PhaseItem,\n  selectors: (typeof PHASE_LOCATIONS)['banner']\n): void => {\n  const endDateAttr = item.getAttribute(SHARED_PHASE_ATTRIBUTES.endDate);\n  const targetDate = getValidDate(endDateAttr);\n  if (!targetDate) return;\n\n  const timer = item.querySelector(selectors.timer);\n  if (!timer) return;\n\n  const bannerCountdownMessage = item.querySelector(selectors.countdownMessage) as HTMLElement;\n  const bannerMessageWrapper = item.querySelector(selectors.messageWrapper) as HTMLElement;\n\n  // Check if countdown is already complete\n  const timeRemaining = calculateTimeRemaining(targetDate);\n\n  if (!timeRemaining) {\n    // Countdown already complete\n    if (bannerCountdownMessage) {\n      bannerCountdownMessage.style.display = 'none';\n    }\n\n    if (bannerMessageWrapper) {\n      bannerMessageWrapper.style.display = 'block';\n    }\n\n    timer.textContent = 'Completed';\n    return;\n  }\n\n  // Set initial timer value\n  timer.textContent = formatTimeDisplay(timeRemaining);\n\n  // Banner timers are updated collectively in the marquee function\n};\n\n/**\n * Cleanup functions\n */\nconst cleanupPhaseCounter = (item: PhaseItem): void => {\n  if (item._countdownInterval) {\n    clearInterval(item._countdownInterval);\n    delete item._countdownInterval;\n  }\n};\n\n/**\n * Phase display initialization\n */\nconst initPhaseDisplay = (config: PhaseConfig): PhaseData | null => {\n  const selectors = PHASE_LOCATIONS[config.location];\n  const phaseList = document.querySelector(selectors.phaseList);\n\n  if (!phaseList) {\n    console.error(`Phase list not found for ${config.location}`);\n    return null;\n  }\n\n  // Clean up any existing intervals first\n  Array.from(phaseList.children).forEach(cleanupPhaseCounter);\n\n  // Initialize each phase item\n  Array.from(phaseList.children).forEach((item) => {\n    const phaseID = item.getAttribute(SHARED_PHASE_ATTRIBUTES.phaseID);\n    const shouldDisplay =\n      config.showAllPhases || (config.activePhase && phaseID === config.activePhase);\n\n    setElementDisplay(item, shouldDisplay ? 'flex' : 'none');\n\n    if (shouldDisplay) {\n      if (config.location === 'nav') {\n        initNavCountdown(item as PhaseItem, selectors as (typeof PHASE_LOCATIONS)['nav']);\n      } else {\n        initBannerCountdown(item as PhaseItem, selectors as (typeof PHASE_LOCATIONS)['banner']);\n      }\n    }\n  });\n\n  return { phaseList, activePhase: config.activePhase };\n};\n\n/**\n * Main entry point for phase control functionality\n */\nconst phaseControl = (): (() => void) | void => {\n  try {\n    // Get configuration from DOM\n    const phaseControl = document.querySelector(PHASE_DATA_CONTROL.controlItem);\n    const showAllPhases = !!phaseControl?.querySelector(PHASE_DATA_CONTROL.showAll);\n    const activePhase =\n      phaseControl\n        ?.querySelector(`[${PHASE_DATA_CONTROL.activePhase}]`)\n        ?.getAttribute(PHASE_DATA_CONTROL.activePhase) ?? null;\n\n    // Initialize nav display first\n    const navDisplay = initPhaseDisplay({\n      location: 'nav',\n      showAllPhases,\n      activePhase,\n    });\n\n    // Initialize banner display\n    const bannerDisplay = initPhaseDisplay({\n      location: 'banner',\n      showAllPhases,\n      activePhase,\n    });\n\n    // Initialize marquee banner\n    initMarqueeBanner();\n\n    if (!navDisplay && !bannerDisplay) {\n      console.warn('Phase displays could not be initialized');\n    }\n\n    // Set up resize handler\n    const debouncedResize = createDebouncedResize();\n    window.addEventListener('resize', debouncedResize);\n\n    // Return cleanup function for SPA environments\n    return () => {\n      window.removeEventListener('resize', debouncedResize);\n\n      // Clean up all intervals\n      if (navDisplay?.phaseList) {\n        Array.from(navDisplay.phaseList.children).forEach(cleanupPhaseCounter);\n      }\n\n      if (bannerDisplay?.phaseList) {\n        Array.from(bannerDisplay.phaseList.children).forEach(cleanupPhaseCounter);\n      }\n\n      // Clean up marquee timers\n      document.querySelectorAll(MARQUEE_SELECTORS.row).forEach(cleanupMarqueeTimers);\n    };\n  } catch (error) {\n    console.error('Error initializing phase control:', error);\n  }\n};\n\nconst getCurrentPhase = () => {\n  const phaseControl = document.querySelector(PHASE_DATA_CONTROL.controlItem);\n  const showAllPhases = !!phaseControl?.querySelector(PHASE_DATA_CONTROL.showAll);\n  const activePhase =\n    phaseControl\n      ?.querySelector(`[${PHASE_DATA_CONTROL.activePhase}]`)\n      ?.getAttribute(PHASE_DATA_CONTROL.activePhase) ?? null;\n\n  return { showAllPhases, activePhase };\n};\n\nconst initPhaseControl = () => {\n  phaseControl();\n};\n\nexport { getCurrentPhase, initPhaseControl };\n"],
  "mappings": "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",
  "names": ["rows", "phaseControl"]
}
