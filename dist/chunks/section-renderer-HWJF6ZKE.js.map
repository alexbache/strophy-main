{
  "version": 3,
  "sources": ["../../src/pages/entries/section-renderer.ts"],
  "sourcesContent": ["import { getCurrentPhase } from '../../components/phase-control';\n\nenum PHASES {\n  PHASE_1 = 'phase-1',\n  PHASE_2 = 'phase-2',\n  PHASE_3 = 'phase-3',\n  PHASE_4 = 'phase-4',\n}\n\nconst PAGE_SECTIONS = {\n  WINNERS: '#section-winners',\n  FEATURED_ENTRIES: '#section-featured-entries',\n  ALL_ENTRIES: '#section-all-entries',\n};\n\nconst toggleSection = (section: HTMLElement, show: boolean) => {\n  section.style.display = show ? 'block' : 'none';\n};\n\nconst getSection = (section: string) => {\n  return document.querySelector(section) as HTMLElement;\n};\n\n/**\n * Checks if phase control has been initialized by looking for the control element\n */\nconst isPhaseControlReady = (): boolean => {\n  const phaseControl = document.querySelector('[data-phase-element=\"control\"]');\n  return phaseControl !== null;\n};\n\nconst renderEntries = () => {\n  const { showAllPhases, activePhase } = getCurrentPhase();\n  const winnersSection = getSection(PAGE_SECTIONS.WINNERS);\n  const featuredEntriesSection = getSection(PAGE_SECTIONS.FEATURED_ENTRIES);\n  const allEntriesSection = getSection(PAGE_SECTIONS.ALL_ENTRIES);\n\n  // Safety check: ensure sections exist before toggling\n  if (!winnersSection || !featuredEntriesSection || !allEntriesSection) {\n    console.error('[SectionRenderer] Some sections not found, skipping render');\n    return;\n  }\n\n  if (showAllPhases) {\n    toggleSection(winnersSection, true);\n    toggleSection(featuredEntriesSection, true);\n    toggleSection(allEntriesSection, true);\n    return;\n  }\n\n  if (activePhase === PHASES.PHASE_1) {\n    toggleSection(winnersSection, false);\n    toggleSection(featuredEntriesSection, false);\n    toggleSection(allEntriesSection, false);\n    return;\n  }\n\n  if (activePhase === PHASES.PHASE_2) {\n    toggleSection(winnersSection, false);\n    toggleSection(featuredEntriesSection, true);\n    toggleSection(allEntriesSection, true);\n    return;\n  }\n\n  if (activePhase === PHASES.PHASE_3) {\n    toggleSection(winnersSection, false);\n    toggleSection(featuredEntriesSection, true);\n    toggleSection(allEntriesSection, true);\n    return;\n  }\n\n  if (activePhase === PHASES.PHASE_4) {\n    toggleSection(winnersSection, true);\n    toggleSection(featuredEntriesSection, false);\n    toggleSection(allEntriesSection, true);\n    return;\n  }\n\n  // Fallback: if phase is not detected or is null/undefined, show all sections\n  // This ensures sections are visible if phase detection fails\n  console.error('[SectionRenderer] Unknown phase or phase not detected, showing all sections');\n  toggleSection(winnersSection, true);\n  toggleSection(featuredEntriesSection, true);\n  toggleSection(allEntriesSection, true);\n};\n\n/**\n * Waits for phase control to be ready before rendering sections\n * Retries up to 10 times with 100ms delay between attempts\n */\nconst waitForPhaseControlAndRender = async (maxRetries = 10, delay = 100): Promise<void> => {\n  for (let attempt = 0; attempt < maxRetries; attempt++) {\n    if (isPhaseControlReady()) {\n      renderEntries();\n      return;\n    }\n\n    // Wait before next attempt\n    await new Promise((resolve) => setTimeout(resolve, delay));\n  }\n\n  // If phase control never becomes ready, render anyway (fallback)\n  console.error(\n    '[SectionRenderer] Phase control not ready after retries, rendering with current state'\n  );\n  renderEntries();\n};\n\nconst initSectionRenderer = () => {\n  // Wait for phase control to initialize before rendering sections\n  waitForPhaseControlAndRender();\n};\n\nexport { initSectionRenderer };\n"],
  "mappings": ";;;;;;;;AASA,IAAM,gBAAgB;AAAA,EACpB,SAAS;AAAA,EACT,kBAAkB;AAAA,EAClB,aAAa;AACf;AAEA,IAAM,gBAAgB,CAAC,SAAsB,SAAkB;AAC7D,UAAQ,MAAM,UAAU,OAAO,UAAU;AAC3C;AAEA,IAAM,aAAa,CAAC,YAAoB;AACtC,SAAO,SAAS,cAAc,OAAO;AACvC;AAKA,IAAM,sBAAsB,MAAe;AACzC,QAAM,eAAe,SAAS,cAAc,gCAAgC;AAC5E,SAAO,iBAAiB;AAC1B;AAEA,IAAM,gBAAgB,MAAM;AAC1B,QAAM,EAAE,eAAe,YAAY,IAAI,gBAAgB;AACvD,QAAM,iBAAiB,WAAW,cAAc,OAAO;AACvD,QAAM,yBAAyB,WAAW,cAAc,gBAAgB;AACxE,QAAM,oBAAoB,WAAW,cAAc,WAAW;AAG9D,MAAI,CAAC,kBAAkB,CAAC,0BAA0B,CAAC,mBAAmB;AACpE,YAAQ,MAAM,4DAA4D;AAC1E;AAAA,EACF;AAEA,MAAI,eAAe;AACjB,kBAAc,gBAAgB,IAAI;AAClC,kBAAc,wBAAwB,IAAI;AAC1C,kBAAc,mBAAmB,IAAI;AACrC;AAAA,EACF;AAEA,MAAI,gBAAgB,yBAAgB;AAClC,kBAAc,gBAAgB,KAAK;AACnC,kBAAc,wBAAwB,KAAK;AAC3C,kBAAc,mBAAmB,KAAK;AACtC;AAAA,EACF;AAEA,MAAI,gBAAgB,yBAAgB;AAClC,kBAAc,gBAAgB,KAAK;AACnC,kBAAc,wBAAwB,IAAI;AAC1C,kBAAc,mBAAmB,IAAI;AACrC;AAAA,EACF;AAEA,MAAI,gBAAgB,yBAAgB;AAClC,kBAAc,gBAAgB,KAAK;AACnC,kBAAc,wBAAwB,IAAI;AAC1C,kBAAc,mBAAmB,IAAI;AACrC;AAAA,EACF;AAEA,MAAI,gBAAgB,yBAAgB;AAClC,kBAAc,gBAAgB,IAAI;AAClC,kBAAc,wBAAwB,KAAK;AAC3C,kBAAc,mBAAmB,IAAI;AACrC;AAAA,EACF;AAIA,UAAQ,MAAM,6EAA6E;AAC3F,gBAAc,gBAAgB,IAAI;AAClC,gBAAc,wBAAwB,IAAI;AAC1C,gBAAc,mBAAmB,IAAI;AACvC;AAMA,IAAM,+BAA+B,OAAO,aAAa,IAAI,QAAQ,QAAuB;AAC1F,WAAS,UAAU,GAAG,UAAU,YAAY,WAAW;AACrD,QAAI,oBAAoB,GAAG;AACzB,oBAAc;AACd;AAAA,IACF;AAGA,UAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,SAAS,KAAK,CAAC;AAAA,EAC3D;AAGA,UAAQ;AAAA,IACN;AAAA,EACF;AACA,gBAAc;AAChB;AAEA,IAAM,sBAAsB,MAAM;AAEhC,+BAA6B;AAC/B;",
  "names": []
}
