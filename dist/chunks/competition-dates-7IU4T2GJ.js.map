{
  "version": 3,
  "sources": ["../../src/pages/home/sections/competition-dates.ts"],
  "sourcesContent": ["import { gsap } from 'gsap';\nimport { ScrollTrigger } from 'gsap/ScrollTrigger';\n\nimport { handleResize } from '$utils/handle-resize';\nimport { getViewportHeightMeasurements, isMobile } from '$utils/page-utils';\n\nconst SELECTORS = {\n  image: '[date-element=\"image\"]',\n  info: '[date-element=\"information\"]',\n  stickyImage: '.date_sticky-image',\n} as const;\n\nconst ANIMATION_CONFIG = {\n  rotationRange: [-5, 5] as const,\n  duration: 0.4,\n  ease: 'power2.out',\n} as const;\n\nconst updateStickyImageTop = () => {\n  try {\n    const stickyImages = document.querySelectorAll<HTMLElement>(SELECTORS.stickyImage);\n    if (!stickyImages.length) {\n      console.error('No sticky images found to update positions');\n      return;\n    }\n    const { fullHeight } = getViewportHeightMeasurements();\n    // console.log('Viewport height:', fullHeight);\n    stickyImages.forEach((stickyImage) => {\n      const imageChild = stickyImage.firstElementChild;\n      if (!imageChild) {\n        console.error('Sticky image container has no child element');\n        return;\n      }\n      const imageHeight = imageChild.getBoundingClientRect().height;\n      const topOffset = (fullHeight - imageHeight) / 2;\n      // Apply the new position\n      stickyImage.style.top = `${topOffset}px`;\n      // Log for debugging\n      //   console.log(`Sticky image ${index} updated: height=${imageHeight}, top=${topOffset}px`);\n    });\n  } catch (error) {\n    console.error('Error updating sticky image positions:', error);\n  }\n};\n\nconst setupElementAnimations = (img: Element, info: Element, index: number) => {\n  const getRandomRotation = () => {\n    const [min, max] = ANIMATION_CONFIG.rotationRange;\n    return Math.random() * (max - min) + min;\n  };\n\n  const rotationDirection = index % 2 === 0 ? 1 : -1;\n  const randomRotation = getRandomRotation() * rotationDirection;\n\n  // Set initial states\n  gsap.set(img, { opacity: 0, rotation: -randomRotation, scale: 0.9 });\n  gsap.set(info, { opacity: 0, x: -20 });\n\n  // Create timeline with ScrollTrigger\n  const tl = gsap.timeline({\n    scrollTrigger: {\n      trigger: img,\n      start: 'top 50%',\n      end: 'bottom 30%',\n      toggleActions: 'play none none reverse',\n      id: `competitionDatesAnimation${index}`,\n      //   markers: true,\n    },\n  });\n\n  // Add animations to timeline\n  tl.to(\n    img,\n    {\n      opacity: 1,\n      rotation: randomRotation,\n      scale: 1,\n      duration: ANIMATION_CONFIG.duration,\n      ease: ANIMATION_CONFIG.ease,\n    },\n    '<'\n  ).to(\n    info,\n    {\n      opacity: 1,\n      y: 0,\n      x: 0,\n      scale: 1,\n      duration: ANIMATION_CONFIG.duration,\n      ease: ANIMATION_CONFIG.ease,\n    },\n    '<'\n  );\n};\n\nconst competitionDates = () => {\n  try {\n    // Check if we're on mobile - if so, don't set up animations\n    if (isMobile()) {\n      return () => {}; // Return empty cleanup function\n    }\n\n    // Function to completely reinitialize everything\n    const reinitialize = () => {\n      // Kill all existing ScrollTrigger instances\n      ScrollTrigger.getById('competitionDatesAnimation0')?.kill();\n\n      // Get fresh references to elements\n      const images = document.querySelectorAll(SELECTORS.image);\n      const info = document.querySelectorAll(SELECTORS.info);\n\n      if (!images.length || !info.length) {\n        console.error('Required competition dates elements not found during reinitialization');\n        return;\n      }\n\n      // Update sticky positions\n      updateStickyImageTop();\n\n      // Set up animations\n      images.forEach((img, index) => {\n        const correspondingInfo = info[index];\n        if (correspondingInfo) {\n          setupElementAnimations(img, correspondingInfo, index);\n        }\n      });\n    };\n\n    // Initial setup\n    gsap.registerPlugin(ScrollTrigger);\n    reinitialize();\n\n    handleResize(reinitialize, 100, {\n      widthOnly: true,\n      threshold: 10,\n    });\n\n    return () => {\n      ScrollTrigger.getById('competitionDatesAnimation0')?.kill();\n    };\n  } catch (error) {\n    console.error('Error initializing competition dates:', error);\n    return () => {}; // Return empty cleanup function on error\n  }\n};\n\nconst initCompetitionDates = () => {\n  competitionDates();\n};\n\nexport { initCompetitionDates };\n"],
  "mappings": "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",
  "names": []
}
